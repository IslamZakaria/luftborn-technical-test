<form (ngSubmit)="onSubmit()" #productForm="ngForm" class="product-form">
      <div class="form-grid">
        <div class="main-column">
          <!-- Basic Information -->
          <div class="form-section">
            <h5 class="section-title">
                <i class="fas fa-info-circle"></i> Basic Information
            </h5>
            <div class="form-group">
              <label for="name" class="form-label">Product Name <span class="required">*</span></label>
              <div class="input-wrapper">
                  <input type="text" class="input" id="name" required [(ngModel)]="model.name" name="name" #name="ngModel" placeholder="e.g. Wireless Headphones">
                  <i class="fas fa-tag input-icon"></i>
              </div>
              <div *ngIf="name.invalid && (name.dirty || name.touched)" class="text-error">
                Name is required.
              </div>
            </div>

            <div class="form-group">
              <label for="description" class="form-label">Description <span class="required">*</span></label>
              <textarea class="input textarea" id="description" rows="5" required [(ngModel)]="model.description" name="description" #description="ngModel" placeholder="Enter product description..."></textarea>
              <div *ngIf="description.invalid && (description.dirty || description.touched)" class="text-error">
                 Description is required.
              </div>
            </div>
          </div>

          <!-- Pricing & Inventory -->
          <div class="form-section">
            <h5 class="section-title">
                <i class="fas fa-coins"></i> Pricing & Inventory
            </h5>
            <div class="three-col-grid">
                <div class="form-group">
                    <label for="sku" class="form-label">SKU <span class="required">*</span></label>
                    <div class="input-wrapper">
                        <input type="text" class="input" id="sku" required [(ngModel)]="model.sku" name="sku" #sku="ngModel" placeholder="e.g. WH-1000XM4">
                        <i class="fas fa-barcode input-icon"></i>
                    </div>
                    <div *ngIf="sku.invalid && (sku.dirty || sku.touched)" class="text-error">
                    SKU is required.
                    </div>
                </div>
              <div class="form-group">
                <label for="price" class="form-label">Price <span class="required">*</span></label>
                <div class="input-wrapper">
                    <span class="currency-prefix">$</span>
                  <input type="number" class="input pl-4" id="price" required min="0.01" step="0.01" [(ngModel)]="model.price" name="price" #price="ngModel" placeholder="0.00">
                </div>
                <div *ngIf="price.invalid && (price.dirty || price.touched)" class="text-error">
                  Valid price required.
                </div>
              </div>

              <div class="form-group">
                <label for="stockQuantity" class="form-label">Stock <span class="required">*</span></label>
                <div class="input-wrapper">
                    <input type="number" class="input" id="stockQuantity" required min="0" [(ngModel)]="model.stockQuantity" name="stockQuantity" #stock="ngModel" placeholder="0">
                    <i class="fas fa-boxes input-icon"></i>
                </div>
                <div *ngIf="stock.invalid && (stock.dirty || stock.touched)" class="text-error">
                  Valid stock required.
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="sidebar-column">
          <!-- Organization -->
          <div class="form-section">
            <h5 class="section-title">
                <i class="fas fa-folder"></i> Organization
            </h5>
            <div class="form-group">
              <label for="category" class="form-label">Category <span class="required">*</span></label>
              <div class="select-wrapper">
                  <select class="select" id="category" required [(ngModel)]="model.category" name="category" #category="ngModel">
                    <option [ngValue]="null" disabled>Select a category</option>
                    <option *ngFor="let cat of categories" [ngValue]="cat.value">{{ cat.label }}</option>
                  </select>
                  <i class="fas fa-chevron-down select-icon"></i>
              </div>
              <div *ngIf="category.invalid && (category.dirty || category.touched)" class="text-error">
                Category is required.
              </div>
            </div>

            <div class="form-group">
                <label class="form-label">Status</label>
                <div class="toggle-switch-wrapper">
                    <label class="toggle-switch">
                        <input type="checkbox" id="isActive" [(ngModel)]="model.isActive" name="isActive">
                        <span class="slider round"></span>
                    </label>
                    <span class="status-label" [class.active]="model.isActive">
                        {{ model.isActive ? 'Active' : 'Inactive' }}
                    </span>
                </div>
            </div>
          </div>

          <!-- Media -->
          <div class="form-section">
              <h5 class="section-title">
                  <i class="fas fa-image"></i> Media
              </h5>
              <div class="form-group">
                <label for="imageUrl" class="form-label">Image URL</label>
                <div class="input-wrapper">
                    <input type="text" class="input" id="imageUrl" [(ngModel)]="model.imageUrl" name="imageUrl" placeholder="https://example.com/image.jpg">
                    <i class="fas fa-link input-icon"></i>
                </div>
              </div>
              <div class="image-preview" *ngIf="model.imageUrl">
                  <img [src]="model.imageUrl" alt="Preview" onerror="this.src='assets/placeholder.png'">
                  <div class="preview-badge">Preview</div>
              </div>
            </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="onCancel()">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid || loading">
            <span *ngIf="loading" class="spinner"></span>
            <span>{{ isEdit ? 'Update Product' : 'Create Product' }}</span>
        </button>
      </div>
    </form>